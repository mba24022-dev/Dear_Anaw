<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Love!</title>
    <style>
        :root {
            --cake-color: #f4d03f;
            --frosting-color: #ffffff;
            --candle-color: #ff6b6b;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden; transition: background-color 0.8s ease;
            background-color: #ffe5ec; 
        }

        .container { 
            text-align: center; 
            cursor: pointer; 
            width: 100%; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
        }

        #main-text { font-size: 2.2rem; font-weight: bold; color: #444; margin-bottom: 30px; min-height: 4rem; }

        /* --- CSS CAKE DESIGN --- */
        #cake-stage { display: none; position: relative; width: 200px; height: 150px; margin-bottom: 20px; }
        
        .cake-body {
            position: absolute; bottom: 0; width: 200px; height: 100px;
            background: var(--cake-color); border-radius: 10px 10px 0 0;
            box-shadow: inset 0 -10px 0 rgba(0,0,0,0.1);
        }

        .frosting {
            position: absolute; top: 90px; width: 200px; height: 30px;
            background: var(--frosting-color); border-radius: 20px;
        }

        .candle {
            position: absolute; bottom: 100px; left: 90px;
            width: 20px; height: 50px; background: var(--candle-color);
            border-radius: 3px;
        }

        .flame {
            position: absolute; top: -25px; left: 2px;
            width: 15px; height: 25px; background: orange;
            border-radius: 50% 50% 20% 20%;
            animation: flicker 0.2s infinite alternate;
        }

        .smoke {
            display: none; position: absolute; top: -30px; left: 5px;
            font-size: 20px; color: #888; animation: rise 2s forwards;
        }

        @keyframes flicker { from { transform: scale(1); opacity: 0.9; } to { transform: scale(1.2); opacity: 1; } }
        @keyframes rise { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-40px); } }

        /* --- ELEMENTS --- */
        #envelope-container { display: none; font-size: 5rem; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

        /* UPDATED CENTERED LETTER STYLES */
        #letter {
            display: none; 
            background: white; 
            padding: 40px; 
            border-radius: 15px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.2); 
            max-width: 500px;
            width: 85%; /* Responsive width */
            text-align: left; 
            line-height: 1.8; 
            color: #333; 
            margin: auto; /* Centers horizontally in flex container */
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .popper { position: absolute; font-size: 2rem; animation: fall 3s linear forwards; z-index: 100; }
        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }

    </style>
</head>
<body>

    <div class="container" id="wrapper" onclick="handleInteraction()">
        <div id="main-text">Click if its your birthday</div>
        
        <div id="cake-stage">
            <div class="candle">
                <div class="flame" id="candle-flame"></div>
                <div class="smoke" id="candle-smoke">üí®</div>
            </div>
            <div class="cake-body"></div>
            <div class="frosting"></div>
        </div>

        <div id="envelope-container">‚úâÔ∏è<br><span style="font-size: 1.2rem; color: #666;">click to read</span></div>

        <div id="letter">
            <h3 style="margin-top: 0; color: #d63384;">Happy Birthday Sweet Pie.</h3>
            <p>This day is so special. I dont know about you but to me it is. So it is special to you too. Ehe! I love you and I wish I could hug you right now. I wish I was there more than I ever did. But holy cow! at least I can openly wish you now! Coz the last time I remember. I wished you 'Happy Birthday' and I added 'I'm not sure' after it. But I was. Checking your birthday was one of the very first things I did when I started stalking you. muwahahahaaaaa...</p>
            <p>Toh kya hua! Ab to phas chuke ho. Kuch nai ho skta. Well I wish I could post the letter I wrote for you. Or I gave you the letter I wrote for you. Sowwwyyy.. Dani was Drunk. Well I'll give it to you later. So meet me soon. I miss you. I want to tickle you so that you can say 'mat karoooo' a cutu patoootuuuu.. Ehehehe.</p>
            <strong style="color: #d63384;">Happy Birthday Again Sweet pie. I love you ‚ù§Ô∏è</strong>
        </div>
    </div>

    <script>
        let currentState = "START";

        function handleInteraction() {
            if (currentState === "START") {
                showCake();
            } else if (currentState === "ENVELOPE") {
                showLetter();
            }
        }

        function showCake() {
            currentState = "COUNTDOWN";
            document.getElementById('cake-stage').style.display = "block";
            startCountdown(3);
        }

        function startCountdown(num) {
            const textDisplay = document.getElementById('main-text');
            if (num > 0) {
                textDisplay.innerText = "Blow it in " + num + "...";
                setTimeout(() => startCountdown(num - 1), 1000);
            } else {
                textDisplay.innerText = "Blow!";
                setTimeout(blowOut, 800);
            }
        }

        function blowOut() {
            document.getElementById('candle-flame').style.display = "none";
            document.getElementById('candle-smoke').style.display = "block";
            
            document.body.style.backgroundColor = "white";
            document.getElementById('main-text').innerText = "HAPPY BIRTHDAYY MY LOVE!!!!";
            
            for(let i=0; i<40; i++) { createPopper(); }

            setTimeout(() => {
                document.getElementById('main-text').style.display = "none";
                document.getElementById('cake-stage').style.display = "none";
                document.getElementById('envelope-container').style.display = "block";
                currentState = "ENVELOPE";
            }, 3500);
        }

        function showLetter() {
            document.getElementById('envelope-container').style.display = "none";
            document.getElementById('letter').style.display = "block";
            currentState = "FINISHED";
        }

        function createPopper() {
            const p = document.createElement('div');
            p.className = 'popper';
            const icons = ['üéâ', '‚ú®', 'üéà', 'üíñ', 'üéä', 'üç∞'];
            p.innerText = icons[Math.floor(Math.random() * icons.length)];
            p.style.left = Math.random() * 100 + 'vw';
            p.style.top = '-50px';
            p.style.fontSize = (Math.random() * 20 + 20) + 'px';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 3000);
        }
    </script>
</body>
</html>